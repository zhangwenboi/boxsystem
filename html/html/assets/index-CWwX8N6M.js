(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var I={exports:{}},j={},L={exports:{}},u={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x=Symbol.for("react.element"),W=Symbol.for("react.portal"),J=Symbol.for("react.fragment"),Q=Symbol.for("react.strict_mode"),X=Symbol.for("react.profiler"),Z=Symbol.for("react.provider"),ee=Symbol.for("react.context"),te=Symbol.for("react.forward_ref"),re=Symbol.for("react.suspense"),ne=Symbol.for("react.memo"),oe=Symbol.for("react.lazy"),k=Symbol.iterator;function se(e){return e===null||typeof e!="object"?null:(e=k&&e[k]||e["@@iterator"],typeof e=="function"?e:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,B={};function y(e,t,n){this.props=e,this.context=t,this.refs=B,this.updater=n||N}y.prototype.isReactComponent={};y.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function q(){}q.prototype=y.prototype;function C(e,t,n){this.props=e,this.context=t,this.refs=B,this.updater=n||N}var S=C.prototype=new q;S.constructor=C;A(S,y.prototype);S.isPureReactComponent=!0;var $=Array.isArray,H=Object.prototype.hasOwnProperty,b={current:null},z={key:!0,ref:!0,__self:!0,__source:!0};function U(e,t,n){var o,r={},s=null,a=null;if(t!=null)for(o in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(s=""+t.key),t)H.call(t,o)&&!z.hasOwnProperty(o)&&(r[o]=t[o]);var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){for(var c=Array(l),p=0;p<l;p++)c[p]=arguments[p+2];r.children=c}if(e&&e.defaultProps)for(o in l=e.defaultProps,l)r[o]===void 0&&(r[o]=l[o]);return{$$typeof:x,type:e,key:s,ref:a,props:r,_owner:b.current}}function ie(e,t){return{$$typeof:x,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function E(e){return typeof e=="object"&&e!==null&&e.$$typeof===x}function ue(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var D=/\/+/g;function P(e,t){return typeof e=="object"&&e!==null&&e.key!=null?ue(""+e.key):t.toString(36)}function _(e,t,n,o,r){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case x:case W:a=!0}}if(a)return a=e,r=r(a),e=o===""?"."+P(a,0):o,$(r)?(n="",e!=null&&(n=e.replace(D,"$&/")+"/"),_(r,t,n,"",function(p){return p})):r!=null&&(E(r)&&(r=ie(r,n+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(D,"$&/")+"/")+e)),t.push(r)),1;if(a=0,o=o===""?".":o+":",$(e))for(var l=0;l<e.length;l++){s=e[l];var c=o+P(s,l);a+=_(s,t,n,c,r)}else if(c=se(e),typeof c=="function")for(e=c.call(e),l=0;!(s=e.next()).done;)s=s.value,c=o+P(s,l++),a+=_(s,t,n,c,r);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function R(e,t,n){if(e==null)return e;var o=[],r=0;return _(e,o,"","",function(s){return t.call(n,s,r++)}),o}function ae(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var f={current:null},g={transition:null},ce={ReactCurrentDispatcher:f,ReactCurrentBatchConfig:g,ReactCurrentOwner:b};function V(){throw Error("act(...) is not supported in production builds of React.")}u.Children={map:R,forEach:function(e,t,n){R(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return R(e,function(){t++}),t},toArray:function(e){return R(e,function(t){return t})||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};u.Component=y;u.Fragment=J;u.Profiler=X;u.PureComponent=C;u.StrictMode=Q;u.Suspense=re;u.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ce;u.act=V;u.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=A({},e.props),r=e.key,s=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,a=b.current),t.key!==void 0&&(r=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)H.call(t,c)&&!z.hasOwnProperty(c)&&(o[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)o.children=n;else if(1<c){l=Array(c);for(var p=0;p<c;p++)l[p]=arguments[p+2];o.children=l}return{$$typeof:x,type:e.type,key:r,ref:s,props:o,_owner:a}};u.createContext=function(e){return e={$$typeof:ee,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Z,_context:e},e.Consumer=e};u.createElement=U;u.createFactory=function(e){var t=U.bind(null,e);return t.type=e,t};u.createRef=function(){return{current:null}};u.forwardRef=function(e){return{$$typeof:te,render:e}};u.isValidElement=E;u.lazy=function(e){return{$$typeof:oe,_payload:{_status:-1,_result:e},_init:ae}};u.memo=function(e,t){return{$$typeof:ne,type:e,compare:t===void 0?null:t}};u.startTransition=function(e){var t=g.transition;g.transition={};try{e()}finally{g.transition=t}};u.unstable_act=V;u.useCallback=function(e,t){return f.current.useCallback(e,t)};u.useContext=function(e){return f.current.useContext(e)};u.useDebugValue=function(){};u.useDeferredValue=function(e){return f.current.useDeferredValue(e)};u.useEffect=function(e,t){return f.current.useEffect(e,t)};u.useId=function(){return f.current.useId()};u.useImperativeHandle=function(e,t,n){return f.current.useImperativeHandle(e,t,n)};u.useInsertionEffect=function(e,t){return f.current.useInsertionEffect(e,t)};u.useLayoutEffect=function(e,t){return f.current.useLayoutEffect(e,t)};u.useMemo=function(e,t){return f.current.useMemo(e,t)};u.useReducer=function(e,t,n){return f.current.useReducer(e,t,n)};u.useRef=function(e){return f.current.useRef(e)};u.useState=function(e){return f.current.useState(e)};u.useSyncExternalStore=function(e,t,n){return f.current.useSyncExternalStore(e,t,n)};u.useTransition=function(){return f.current.useTransition()};u.version="18.3.1";L.exports=u;var le=L.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var de=le,fe=Symbol.for("react.element"),pe=Symbol.for("react.fragment"),me=Object.prototype.hasOwnProperty,he=de.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ye={key:!0,ref:!0,__self:!0,__source:!0};function Y(e,t,n){var o,r={},s=null,a=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(a=t.ref);for(o in t)me.call(t,o)&&!ye.hasOwnProperty(o)&&(r[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps,t)r[o]===void 0&&(r[o]=t[o]);return{$$typeof:fe,type:e,key:s,ref:a,props:r,_owner:he.current}}j.Fragment=pe;j.jsx=Y;j.jsxs=Y;I.exports=j;var i=I.exports;const ve={route:{path:"/",routes:[{path:"/home",name:"欢迎",icon:i.jsx(antd.SmileFilled,{}),component:"./home"}]},location:{pathname:"/"}};/**
 * @remix-run/router v1.19.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var T;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(T||(T={}));var M;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(M||(M={}));class xe extends Error{}const K=["post","put","patch","delete"];new Set(K);const Re=["get",...K];new Set(Re);/**
 * React Router v6.26.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const F=React.createContext(null),G=React.createContext({outlet:null,matches:[],isDataRoute:!1}),_e=React.createContext(null),ge=React.createContext(null);function je(e){let t=React.useContext(G).outlet;return t&&React.createElement(ge.Provider,{value:e},t)}class Ne extends React.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?React.createElement(G.Provider,{value:this.props.routeContext},React.createElement(_e.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}const Pe="startTransition";React[Pe];function Ce(e){return je(e.context)}var m=function(e){return e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error",e}(m||{});const Se=new Promise(()=>{});class Ae extends React.Component{constructor(t){super(t),this.state={error:null}}static getDerivedStateFromError(t){return{error:t}}componentDidCatch(t,n){console.error("<Await> caught the following error during render",t,n)}render(){let{children:t,errorElement:n,resolve:o}=this.props,r=null,s=m.pending;if(!(o instanceof Promise))s=m.success,r=Promise.resolve(),Object.defineProperty(r,"_tracked",{get:()=>!0}),Object.defineProperty(r,"_data",{get:()=>o});else if(this.state.error){s=m.error;let a=this.state.error;r=Promise.reject().catch(()=>{}),Object.defineProperty(r,"_tracked",{get:()=>!0}),Object.defineProperty(r,"_error",{get:()=>a})}else o._tracked?(r=o,s="_error"in r?m.error:"_data"in r?m.success:m.pending):(s=m.pending,Object.defineProperty(o,"_tracked",{get:()=>!0}),r=o.then(a=>Object.defineProperty(o,"_data",{get:()=>a}),a=>Object.defineProperty(o,"_error",{get:()=>a})));if(s===m.error&&r._error instanceof xe)throw Se;if(s===m.error&&!n)throw r._error;if(s===m.error)return React.createElement(F.Provider,{value:r,children:n});if(s===m.success)return React.createElement(F.Provider,{value:r,children:t});throw r}}const be=()=>{const[e,t]=React.useState("/home");return typeof document>"u"?i.jsx("div",{}):i.jsx("div",{id:"test-pro-layout",style:{height:"100vh",overflow:"auto"},children:i.jsx(antd.ProConfigProvider,{hashed:!1,children:i.jsx(antd.ConfigProvider,{getTargetContainer:()=>document.getElementById("test-pro-layout")||document.body,children:i.jsx(antd.ProLayout,{prefixCls:"my-prefix",...ve,location:{pathname:e},token:{header:{colorBgMenuItemSelected:"rgba(0,0,0,0.04)"}},siderMenuType:"group",menu:{collapsedShowGroupTitle:!0},title:"系统信息",menuItemRender:(n,o)=>i.jsx("div",{onClick:()=>{t(n.path||"/home")},children:o}),children:i.jsx(antd.PageContainer,{token:{paddingInlinePageContainerContent:20},subTitle:"下行盒子拉取查看",children:i.jsx(Ce,{})})})})})})},Ee=()=>i.jsx(antd.Result,{status:"404",title:"404",subTitle:"哦吼,找不到页面了!",extra:i.jsx(ReactRouterDOM.Link,{to:"/",children:i.jsx(antd.Button,{type:"primary",children:"返回首页"})})}),Oe={200:"服务器成功返回请求的数据。",201:"新建或修改数据成功。",202:"一个请求已经进入后台排队（异步任务）。",204:"删除数据成功。",400:"发出的请求有错误，服务器没有进行新建或修改数据的操作。",401:"用户没有权限（令牌、用户名、密码错误）。",403:"用户得到授权，但是访问是被禁止的。",404:"发出的请求针对的是不存在的记录，服务器没有进行操作。",406:"请求的格式不可得。",410:"请求的资源被永久删除，且不会再得到的。",422:"当创建一个对象时，发生一个验证错误。",500:"服务器发生错误，请检查服务器。",502:"网关错误。",503:"服务不可用，服务器暂时过载或维护。",504:"网关超时。"},we=e=>{if(e.request.options.responseType==="blob")return e;const{response:t}=e;if(t&&t.status){const n=Oe[t.status]||t.statusText,{status:o,url:r}=t;let s=r;r.indexOf("?")!==-1&&(s=r.substring(0,r.indexOf("?"))),antd.message.error(`请求错误 [${o}]: ${s}${n}`)}else t||antd.message.error("您的网络发生异常，无法连接服务器");return t},h=umi-h.extend({errorHandler:we,credentials:"include"});h.interceptors.response.use(async(e,t)=>{if(t.responseType==="blob")return e;const{status:n}=e;return n===500&&antd.message.error({content:"网络错误"}),e});const ke=async e=>await new Promise(t=>{setTimeout(()=>{t(!0)},e)}),$e=e=>{if(e){const t=(e==null?void 0:e.split(/\ /g))||[0,"KB"];return i.jsx(react-countup,{end:t[0],suffix:t[1],separator:",",decimals:2})}return"0KB"},De=()=>{var O;const[e,t]=React.useState(),[n,o]=React.useState(1920),[r,s]=React.useState([]),a=async()=>{const d=await h.get("/api/system_status");d.code===1e3&&t(d.data)};React.useEffect(()=>{a()},[]);const l=(O=r==null?void 0:r[0])==null?void 0:O.rx,c=[{title:"日期",dataIndex:"day"},{title:"下载",dataIndex:"rx"},{title:"平均速率",dataIndex:"avg"}],p=r==null?void 0:r.reduce((d,v)=>{var w;return d+Number((w=v.rx.match(/\d+\.\d+/g))==null?void 0:w[0])},0);return i.jsx("div",{children:i.jsx(rc-resize-observer,{onResize:d=>{o(d.width)},children:i.jsxs(antd.ProCard,{title:"数据概览",extra:i.jsxs(i.Fragment,{children:[i.jsxs(antd.ModalForm,{title:"设置运行时间",layout:"horizontal",width:n<596?"80%":"60%",trigger:i.jsx("a",{className:"mx-2",children:" 设置 "}),onFinish:async d=>{const v=await h.post("/api/system-exec-time-piker",{data:d});antd.message.success(v.data)},submitter:{render(d,v){return i.jsx("div",{className:" flex gap-x-2 justify-center w-full ",children:v})}},children:[i.jsx(antd.ProFormDependency,{name:["repeat"],children:({repeat:d})=>i.jsx(antd.ProFormTimePicker.RangePicker,{rules:d?[]:[{required:!0}],tooltip:"只会在此时间段内运行",name:"time",disabled:d,label:"运行时间",fieldProps:{format:"HH:mm"}})}),i.jsx(antd.ProFormSwitch,{name:"repeat",label:"持续运行",tooltip:"开启后将全天运行",fieldProps:{checkedChildren:"开启",unCheckedChildren:"关闭"}})]}),dayjs().format("YYYY-MM-DD HH:mm:ss")]}),split:n<1280?"horizontal":"vertical",headerBordered:!0,bordered:!0,children:[i.jsxs(antd.ProCard,{split:"horizontal",children:[i.jsxs(antd.ProCard,{split:"horizontal",children:[i.jsxs(antd.ProCard,{split:n<596?"horizontal":"vertical",children:[i.jsx(antd.StatisticCard,{statistic:{title:"今日下载",value:l,precision:3,formatter:$e}}),i.jsx(antd.StatisticCard,{statistic:{title:"近30日流量",value:p,suffix:"GB",precision:2}})]}),i.jsxs(antd.ProCard,{split:"vertical",children:[i.jsx(antd.StatisticCard,{statistic:{title:"内存占用",value:(e==null?void 0:e.memory_used_percent)||0,precision:2,suffix:"%"}}),i.jsx(antd.StatisticCard,{statistic:{title:"CPU占用",value:`${(e==null?void 0:e.cpu_percent)||0}`,suffix:"%",precision:2}})]})]}),i.jsx(antd.ProTable,{toolbar:{title:"近日流量"},options:n>596?!1:{density:!0,fullScreen:!0,reload:!0},tooltip:"数据更新有延迟，仅供参考",request:async()=>{const d=await h.get("/api/month_info");return d.code===1e3?(s(d.data),{data:d.data,success:!0}):{data:[],success:!1}},search:!1,columns:c,pagination:{hideOnSinglePage:!0}})]}),i.jsx(Te,{})]})},"resize-observer")})},Te=()=>i.jsx(antd.StatisticCard,{title:"流量走势",extra:!1,chart:i.jsx(Me,{})}),Me=()=>{const[e,t]=React.useState([]);React.useEffect(()=>{const o=async()=>{const r=await h.get("/api/network_speed");r.code===1e3&&(t(s=>[...s,{label:dayjs().format("HH:mm:ss"),value:Number(r.data)}]),await ke(2e3),o())};o()},[]);const n={data:e||[],xField:"label",yField:"value",yAxis:{label:{formatter:o=>`${o}MB`}},tooltip:{title:"下载速度",formatter:o=>({name:o.label,value:o.value})},color:["#1979C9","#D62A0D","#FAA219"],smooth:!0,animation:!1};return i.jsx(antd.Line,{...n})};function Fe({to:e}){let t=ReactRouterDOM.useNavigate();return React.useEffect(()=>{t(e)}),null}const Ie=e=>i.jsx(React.Suspense,{children:e});function Le(){return React.useEffect(()=>{var e;(e=document.querySelector("#index-loading"))==null||e.remove()},[]),i.jsx(ReactRouterDOM.Routes,{children:i.jsxs(ReactRouterDOM.Route,{path:"/",element:i.jsx(be,{}),children:[i.jsx(ReactRouterDOM.Route,{path:"NotFound",element:i.jsx(Ee,{})}),i.jsx(ReactRouterDOM.Route,{index:!0,element:Ie(i.jsx(De,{}))}),i.jsx(ReactRouterDOM.Route,{path:"*",element:i.jsx(Fe,{to:"NotFound"})})]})})}ReactDOM.createRoot(document.getElementById("root")).render(i.jsx(ReactRouterDOM.HashRouter,{children:i.jsx(Le,{})}));
