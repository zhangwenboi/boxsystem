import{r as t,aY as N,o as $,p as L,v as j,q as A,aZ as Y,aS as q,_ as I,a_ as C,b as F,a3 as K,aR as T}from"./antd.js";var b=t.createContext(null);function V(e){var a=e.children,r=e.onBatchResize,i=t.useRef(0),n=t.useRef([]),o=t.useContext(b),v=t.useCallback(function(d,s,f){i.current+=1;var h=i.current;n.current.push({size:d,element:s,data:f}),Promise.resolve().then(function(){h===i.current&&(r==null||r(n.current),n.current=[])}),o==null||o(d,s,f)},[r,o]);return t.createElement(b.Provider,{value:v},a)}var c=new Map;function X(e){e.forEach(function(a){var r,i=a.target;(r=c.get(i))===null||r===void 0||r.forEach(function(n){return n(i)})})}var M=new N(X);function Z(e,a){c.has(e)||(c.set(e,new Set),M.observe(e)),c.get(e).add(a)}function G(e,a){c.has(e)&&(c.get(e).delete(a),c.get(e).size||(M.unobserve(e),c.delete(e)))}var J=function(e){$(r,e);var a=L(r);function r(){return j(this,r),a.apply(this,arguments)}return A(r,[{key:"render",value:function(){return this.props.children}}]),r}(t.Component);function Q(e,a){var r=e.children,i=e.disabled,n=t.useRef(null),o=t.useRef(null),v=t.useContext(b),d=typeof r=="function",s=d?r(n):r,f=t.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),h=!d&&t.isValidElement(s)&&Y(s),O=h?s.ref:null,S=q(O,n),_=function(){var l;return C(n.current)||(n.current&&F(n.current)==="object"?C((l=n.current)===null||l===void 0?void 0:l.nativeElement):null)||C(o.current)};t.useImperativeHandle(a,function(){return _()});var z=t.useRef(e);z.current=e;var E=t.useCallback(function(u){var l=z.current,w=l.onResize,D=l.data,x=u.getBoundingClientRect(),p=x.width,m=x.height,R=u.offsetWidth,g=u.offsetHeight,y=Math.floor(p),W=Math.floor(m);if(f.current.width!==y||f.current.height!==W||f.current.offsetWidth!==R||f.current.offsetHeight!==g){var k={width:y,height:W,offsetWidth:R,offsetHeight:g};f.current=k;var P=R===Math.round(p)?p:R,B=g===Math.round(m)?m:g,H=I(I({},k),{},{offsetWidth:P,offsetHeight:B});v==null||v(H,u,D),w&&Promise.resolve().then(function(){w(H,u)})}},[]);return t.useEffect(function(){var u=_();return u&&!i&&Z(u,E),function(){return G(u,E)}},[n.current,i]),t.createElement(J,{ref:o},h?t.cloneElement(s,{ref:S}):s)}var U=t.forwardRef(Q),ee="rc-observer-key";function re(e,a){var r=e.children,i=typeof r=="function"?[r]:K(r);return i.map(function(n,o){var v=(n==null?void 0:n.key)||"".concat(ee,"-").concat(o);return t.createElement(U,T({},e,{key:v,ref:o===0?a:void 0}),n)})}var te=t.forwardRef(re);te.Collection=V;export{te as R};
